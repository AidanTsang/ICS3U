import random

class Player():
    def __init__(self, name):
        self.name = name
        self.cash = 1500
        self.loc = 0
        self.in_jail = False
        self.owned = []

    def move(self):
        if input() == "":
            self.roll_1 = random.randrange(1, 7)
            self.roll_2 = random.randrange(1, 7)
            if self.in_jail and not self.exit_jail():
                self.jail_turn -= 1
            else:
                self.loc += 1
            self.pass_go()
            print(f"Dice 1: {self.roll_1}, Dice 2: {self.roll_2}, Location: {self.loc}, Cash: {self.cash}, {self.owned}")
            self.check_board()
            if self.roll_1 == self.roll_2:
                self.move()

    def pass_go(self):
        if self.loc > 3:
            print("Gained $200 from passing go.")
            self.loc -= 3
            self.cash += 200

    def check_board(self):
        if isinstance(board[self.loc], Property):
            self.property()
        elif board[self.loc] == 1:
            print("You are in jail.")
            self.loc = 10
            self.in_jail = True
            self.jail_turn = 2

    def exit_jail(self):
        if self.in_jail:
            if self.roll_1 == self.roll_2:
                print("You exited jail with a double.")
                self.in_jail = False
                return True
            elif self.jail_turn == 0:
                print("You are forced to paid $50 to exit.")
                self.cash -= 50
                self.in_jail = False
                return True
            elif input("Enter 'Y' to pay $50 to exit jail.") == "Y":
                self.cash -= 50
                print("You paid $50 to exit jail.")
                self.in_jail = False
                return True
            else:
                return False

    def property(self):
        if board[self.loc] not in self.owned and not board[self.loc].bought:
            board[self.loc].buy(self)
        elif board[self.loc] not in self.owned and board[self.loc].bought:
            board[self.loc].payment(self)
        elif board[self.loc] in self.owned:
            print("You landed on your own property.")

class Property():
    def __init__(self, name, cost, location, rent):
        self.name = name
        self.cost = cost
        self.loc = location
        self.rent = rent
        self.building = 0
        self.bought = False

    def buy(self, player):
        if self.bought == False:
            print("You landed on an unbought property. \nEnter 'B' to buy this property.")
            if input() == "B":
                self.bought = True
                self.owner = player
                player.cash -= self.cost
                player.owned.append(self)
                print(f"You bought {self.name} for ${self.cost}, ${player.cash} left.")

    def payment(self, player):
        player.cash -= self.rent
        self.owner.cash += self.rent
        print(f"You paid Player{self.owner.name} ${self.rent} for the rent of {self.name}, ${player.cash} left.")

board = [0 for i in range(40)]
board[30] = 1

player_num = int(input("Enter Player number: "))
players = []
for i in range(player_num):
    players.append(Player(i+1))

property_list = [Property("a", 60, 1, 2), Property("b", 60, 3, 4)]
for i in property_list:
    board[i.loc] = i


while True:
    for i in range(player_num):
        print(f"\nPlayer{i+1}'s turn.", end= "")
        players[i].move()
